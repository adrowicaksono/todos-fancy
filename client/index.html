<!DOCTYPE html>
<html lang="en">
<head>
	<html xmlns="http://www.w3.org/1999/xhtml">
	<meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
	<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<link href="lib/login.css" rel="stylesheet">
</head>
<body>
<div class="container" id="auth">
    <div class="omb_login">
    	<h3 class="omb_authTitle">Login or <a id="sign" href="#" v-on:click="showRegister">Sign up</a></h3>
		<div class="row omb_row-sm-offset-3 omb_socialButtons">
        	<div class="col-xs-12 col-sm-6">
			   <!-- ==========================login button======================== -->
			  
			<fb:login-button 
				scope="public_profile,email" 
				onlogin="checkLoginState();" 
				class="fb-login-button btn btn-block" 
				data-max-rows="1" 
				data-size="large" 
				data-button-type="login_with" 
				data-show-faces="false" 
				data-auto-logout-link="false" 
				data-use-continue-as="false">
			</fb:login-button>
	        </div>	
        	
		</div>

		<div class="row omb_row-sm-offset-3 omb_loginOr">
			<div class="col-xs-12 col-sm-6">
				<hr class="omb_hrOr">
				<span class="omb_spanOr">or</span>
			</div>
		</div>

		<div class="row omb_row-sm-offset-3">
			<div class="col-xs-12 col-sm-6">	
			    
					<div class="input-group">
						<!-- ==========================input======================== -->
						<span class="input-group-addon"><i class="fa fa-user"></i></span>
						<input type="text" class="form-control" name="username" placeholder="email address" v-model="emailUser">
					</div>
					<span class="help-block"></span>
										
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-lock"></i></span>
						<input  type="password" class="form-control" name="password" placeholder="Password" v-model="passwordUser">
					</div>
                    <span class="help-block">Password error</span>
					<button class="btn btn-lg btn-primary btn-block" type="submit" v-on:click="loginManually">Login</button>
				
			</div>
    	</div>
		<div class="row omb_row-sm-offset-3">
			<div class="col-xs-12 col-sm-3">
				<label class="checkbox">
					<input type="checkbox" value="remember-me">Remember Me
				</label>
			</div>
			<div class="col-xs-12 col-sm-3">
				<p class="omb_forgotPwd">
					<a href="#">Forgot password?</a>
				</p>
			</div>
		</div>	    	
	</div>
</div>

<script src="lib/loginFacebook.js"></script>
<script>
	let auth = new Vue({
		el:'#auth',
		data:{
			emailUser : '',
			passwordUser : '',
			isRegister:false
		},
		methods:{
			showRegister(){
				this.isRegister = true
				console.log(this.isRegister)
			},
			loginManually(){
				let email = this.emailUser
				let password = this.passwordUser
				axios
				.post("http://35.240.203.130/auth", {
					email:email,
					password : password,
				})
				.then(function(token){
					console.log(token.data.token)
					localStorage.setItem("token", token.data.token)
					window.location.replace("/home.html")
				})
				.catch(function(err){
					console.log(err.message)
				})
			}
		}
	})
</script>
</body>
</html>